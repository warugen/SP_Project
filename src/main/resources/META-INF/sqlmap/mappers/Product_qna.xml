<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Product_qna">
	<resultMap type="Product_qna" id="Product_qnaResult">
		<result property="pqcode" column="pqcode" />
		<result property="pqtitle" column="pqtitle" />
		<result property="pqcontent" column="pqcontent" />
		<result property="pqanswer" column="pqanswer" />
		<result property="pqsecret" column="pqsecret" />
		<result property="pqcomplete" column="pqcomplete" />
		<result property="pqdate" column="pqdate" />
		<result property="pcode" column="pcode" />
		<result property="cid" column="cid" />
	</resultMap>
	<insert id="writeQna" parameterType="Product_qna">
		INSERT INTO PRODUCT_QNA
		(PQCODE,PQTITLE,PQCONTENT,PQANSWER,PQSECRET,PQCOMPLETE,PCODE,CID)
		VALUES(PRODUCT_QNA_SEQ.nextval,#{pqtitle},#{pqcontent},null
		,#{pqsecret},0,'1','aaa')
	</insert>
	<update id="replyQna" parameterType="Product_qna">
		UPDATE PRODUCT_QNA SET
		PQCOMPLETE=1,PQANSWER=#{pqanswer} WHERE PQCODE=#{pqcode}
	</update>
	<update id="modifyQna" parameterType="Product_qna">
		UPDATE PRODUCT_QNA SET
		PQTITLE=#{pqtitle},
		PQCONTENT=#{pqcontent},
		PQANSWER=null,
		PQSECRET=#{pqsecret}
		WHERE PQCODE=#{pqcode}
	</update>
	<select id="productQnaList" resultMap="Product_qnaResult">
		SELECT * FROM (SELECT
		ROWNUM RN, A.* FROM
		(SELECT * FROM PRODUCT_QNA WHERE PCODE='1' ORDER BY
		PQDATE DESC)A)
		WHERE RN
		BETWEEN #{startrow} AND #{endrow}
	</select>
	<delete id="deleteQna">
		DELETE FROM PRODUCT_QNA WHERE PQCODE=#{pqcode}
	</delete>
	<select id="getQna" parameterType="String"
		resultType="Product_qna">
		SELECT * FROM PRODUCT_QNA WHERE PQCODE=#{pqcode}
	</select>
	<select id="qnaCnt" resultType="int">
		SELECT COUNT(*) FROM PRODUCT_QNA
		WHERE PCODE='1'
	</select>
</mapper> 